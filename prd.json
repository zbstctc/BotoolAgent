{
  "project": "Viewer PRD 导入功能",
  "branchName": "botool/viewer-import-existing-md",
  "description": "为 Viewer Dashboard 添加导入入口，用户可选择项目中已有 .md 文件进入 Stage 1 Transform 模式进行 PRD 规范化",
  "prdFile": "tasks/prd-viewer-import-existing-md.md",
  "constitution": {
    "rules": [
      {
        "id": "rule-001",
        "name": "API设计规范",
        "category": "backend",
        "content": "# API 设计规范\n\n## URL 设计\n- 使用 RESTful 风格\n- 使用复数形式表示资源集合\n\n## 响应格式\n- 统一使用 JSON 格式\n- 包含 success 和 data 字段"
      },
      {
        "id": "rule-002",
        "name": "命名规范",
        "category": "frontend",
        "content": "# 前端命名规范\n\n## 组件命名\n- 使用 PascalCase 命名组件\n- 文件名与组件名保持一致\n\n## 变量命名\n- 使用 camelCase 命名变量和函数\n- 使用 UPPER_CASE 命名常量"
      },
      {
        "id": "rule-003",
        "name": "样式规范",
        "category": "frontend",
        "content": "# 前端样式规范\n\n## CSS 类命名\n- 使用 kebab-case 命名 CSS 类\n- 避免使用内联样式\n\n## Tailwind CSS\n- 优先使用 Tailwind 工具类\n- 避免自定义 CSS"
      },
      {
        "id": "rule-004",
        "name": "测试用例规范",
        "category": "testing",
        "content": "# 测试用例规范\n\n## 测试命名\n- 使用 describe 描述测试套件\n- 使用 it 描述具体测试用例\n\n## 测试覆盖\n- 单元测试覆盖率 > 80%\n- 关键路径必须有 E2E 测试"
      }
    ],
    "ruleAuditSummary": ""
  },
  "devTasks": [
    {
      "id": "DT-001",
      "title": "新建 GET /api/files/md 端点 — 扫描项目 .md 文件列表",
      "prdSection": "7.1 (L20-27)",
      "priority": 1,
      "passes": true,
      "dependsOn": [],
      "evals": [
        {
          "type": "code-based",
          "blocking": true,
          "description": "Typecheck passes",
          "command": "cd viewer && npx tsc --noEmit",
          "expect": "exit-0"
        },
        {
          "type": "code-based",
          "blocking": true,
          "description": "API route file exists",
          "command": "test -f viewer/src/app/api/files/md/route.ts",
          "expect": "exit-0"
        }
      ],
      "testCases": [
        { "type": "typecheck", "desc": "TypeScript 编译通过" }
      ]
    },
    {
      "id": "DT-002",
      "title": "新建 ImportPrdDialog 组件 — 文件列表+搜索+预览+导入",
      "prdSection": "7.1 (L29-37)",
      "priority": 2,
      "passes": true,
      "dependsOn": ["DT-001"],
      "evals": [
        {
          "type": "code-based",
          "blocking": true,
          "description": "Typecheck passes",
          "command": "cd viewer && npx tsc --noEmit",
          "expect": "exit-0"
        },
        {
          "type": "code-based",
          "blocking": true,
          "description": "ImportPrdDialog component exists",
          "command": "test -f viewer/src/components/ImportPrdDialog.tsx",
          "expect": "exit-0"
        }
      ],
      "testCases": [
        { "type": "typecheck", "desc": "TypeScript 编译通过" }
      ]
    },
    {
      "id": "DT-003",
      "title": "Dashboard 集成导入按钮 + 空状态清理 + Stage1 URL 参数",
      "prdSection": "7.1 (L39-47)",
      "priority": 3,
      "passes": true,
      "dependsOn": ["DT-002"],
      "evals": [
        {
          "type": "code-based",
          "blocking": true,
          "description": "Typecheck passes",
          "command": "cd viewer && npx tsc --noEmit",
          "expect": "exit-0"
        }
      ],
      "testCases": [
        { "type": "typecheck", "desc": "TypeScript 编译通过" },
        { "type": "manual", "desc": "Dashboard 显示导入按钮，空状态无多余 action 按钮，Stage1 支持 URL 参数自动进入 transform 模式" }
      ]
    }
  ],
  "sessions": [
    {
      "id": "S1",
      "tasks": ["DT-001", "DT-002", "DT-003"],
      "reason": "单一 Phase，DT-001→DT-002→DT-003 有依赖链"
    }
  ]
}
