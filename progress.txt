# Botool 开发代理进度日志
开始时间: 2026-02-04
项目: 金字塔问答 CLI Skill 集成
分支: botool/pyramid-cli-skill
---

## Codebase Patterns
- 项目使用 Next.js App Router，组件放在 `viewer/src/components/`
- hooks 导出统一通过 `hooks/index.ts`
- CLI 通信使用 `useCliChat` hook 和 `/api/cli/chat` API
- Skill 文件放在 `~/.claude/skills/` 目录
- AskUserQuestion 工具用于交互式提问
- SSE 流式返回通过 CLIManager 处理

---


## 2026-02-04 - DT-001
- 实现了什么：改造 Skill 为可触发模式
- 修改了哪些文件：
  - 重写 `~/.claude/skills/botoolagent-pyramidprd/SKILL.md`
- **未来迭代的经验教训：**
  - 发现的模式：Skill 使用 AskUserQuestion 工具提问，metadata 传递层级信息
  - 有用的上下文：metadata 格式 `{ source, level, levelName, progress, totalLevels }`
  - 有用的上下文：问题格式以 `【L1: 核心识别】` 开头标注层级
---


## 2026-02-04 - DT-002
- 实现了什么：验证并扩展 AskUserQuestion metadata 支持
- 修改了哪些文件：
  - 修改 `viewer/src/lib/tool-types.ts` 添加 PyramidMetadata 类型
- **未来迭代的经验教训：**
  - 发现的模式：toolInput 直接传递给前端，metadata 可通过 `toolUse.input.metadata` 访问
  - 有用的上下文：useCliChat 的 onToolUse 回调接收完整的 toolInput
---

